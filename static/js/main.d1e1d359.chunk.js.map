{"version":3,"sources":["md lazy /^/.//.*/.md$/ groupOptions: {} namespace object","components/MonacoWindow.js","components/SelectSettings.js","data/all_example_settings.js","components/InfoPanel.js","components/Header.js","components/KeyExplore.js","App.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","EditorContainer","props","style","width","ErrorContainer","errors","length","background","error","MonacoWindow","state","prevHeight","updateEditorHeight","editorElement","editor","getDomNode","lineHeight","getOption","monaco","EditorOption","lineCount","getModel","getLineCount","height","getTopForLineNumber","layout","url","fetch","res","json","data","my_schema","text_value","editor_contents_string","modelUri","Uri","parse","model","createModel","languages","jsonDefaults","setDiagnosticsOptions","validate","schemas","uri","fileMatch","toString","schema","create","document","getElementById","value","automaticLayout","language","scrollbar","vertical","handleMouseWheel","scrollBeyondLastLine","minimap","enabled","theme","insertSpaces","onDidChangeModelDecorations","owner","getModeId","markers","getModelMarkers","forEach","d","mes","message","line","startLineNumber","push","setState","prevProps","option_selection","this","setValue","className","React","Component","SelectSettings","key","all_settings","text","all_example_settings","options","k","label","selected_option","onChange","InfoPanel","md","_loadAsyncData","select_id","source","_asyncRequest","f","default","r","prev_select_id","Header","KeyExplore","handleChange","selectedOption","properties","options1","filter","is_comparison_col","options2","comparison_columns","items","concat","op","ss","settings_key","parts","enums","join","quote","code_example","schemaToOptions","schemaSection","optionToSchemaSection","markdownFromSchemaSection","stAnnesTheme","typography","Typography","injectStyles","injectFonts","App","event","settings_id","bind","settings_dict","JSON","stringify","editor_text","getTextFromId","ReactDOM","render"],"mappings":"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","file":"static/js/main.d1e1d359.chunk.js","sourcesContent":["var map = {\n\t\"./id_1.md\": [\n\t\t555,\n\t\t67\n\t],\n\t\"./id_2.md\": [\n\t\t556,\n\t\t68\n\t],\n\t\"./id_3.md\": [\n\t\t557,\n\t\t69\n\t],\n\t\"./id_4.md\": [\n\t\t558,\n\t\t70\n\t],\n\t\"./id_5.md\": [\n\t\t559,\n\t\t71\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 490;\nmodule.exports = webpackAsyncContext;","import React from 'react';\nimport * as monaco from 'monaco-editor'\n\n\n\nconst EditorContainer = (props) => {\n  return <div\n          id=\"editor-container\"\n          style={{width:\"700px\"\n\n          }}></div>\n};\n\nconst ErrorContainer = (props) => {\n  if (props.errors.length === 0) {\n    return (\n      <div  style={{background: \"#bcfbb8\"}}>\n        The above settings object is VALID\n        </div>\n    )\n  } else {\n    return (\n    <div style={{background: \"#fbb8b8\"}}>\n      The above settings object contains the following errors:\n      {props.errors.map(error => <li>{error}</li>)}\n    </div>)\n  }\n\n\n};\n\n\n\nclass MonacoWindow extends React.Component {\n\n  state = {\n    \"errors\": []\n  }\n\n\n\n  componentDidMount() {\n    let url =\n      \"https://raw.githubusercontent.com/moj-analytical-services/splink/master/splink/files/settings_jsonschema.json\"\n\n    let p1 = fetch(url).then(res => res.json())\n\n    p1.then(data => {\n\n      let my_schema = data\n      let text_value = this.props.editor_contents_string\n\n      this.monaco = monaco\n\n      var modelUri = this.monaco.Uri.parse(\"a://b/foo.json\") // a made up unique URI for our model\n      var model = this.monaco.editor.createModel(text_value, \"json\", modelUri)\n\n      this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions({\n        validate: true,\n        schemas: [\n          {\n            uri: url, // id of the first schema\n            fileMatch: [modelUri.toString()], // associate with our model\n            schema: my_schema\n          },\n        ],\n      })\n\n      this.editor = this.monaco.editor.create(\n        document.getElementById(\"editor-container\"),\n        {\n          value: text_value,\n          automaticLayout: false,\n          language: \"json\",\n          model: model,\n          scrollbar: {\n            vertical: \"hidden\",\n            handleMouseWheel: false\n          },\n          scrollBeyondLastLine: false,\n          minimap: {\n            enabled: false\n          },\n          theme:\"vs-dark\",\n          insertSpaces: true\n        }\n      )\n\n      this.model = model\n\n      this.editor.onDidChangeModelDecorations(() => {\n\n        const model = this.editor.getModel();\n        this.updateEditorHeight()\n\n        const owner = model.getModeId();\n        const markers = monaco.editor.getModelMarkers({ owner });\n\n\n        let errors = []\n        markers.forEach(d => {\n          let mes = d.message\n          let line = d.startLineNumber\n           mes = `Error: ${mes} at line ${line}`\n          errors.push(mes)\n        })\n\n        this.setState({\"errors\": errors})\n\n      });\n\n\n    })\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.option_selection !== this.props.option_selection) {\n      this.editor.setValue(this.props.editor_contents_string)\n    }\n\n  }\n\n  prevHeight = 0\n\n  updateEditorHeight = () => {\n    const editorElement = this.editor.getDomNode()\n\n    if (!editorElement) {\n      return\n    }\n\n    const lineHeight = this.editor.getOption(monaco.editor.EditorOption.lineHeight)\n    const lineCount = this.editor.getModel()?.getLineCount() || 1\n    const height = this.editor.getTopForLineNumber(lineCount + 1) + lineHeight\n\n    if (this.prevHeight !== height) {\n      this.prevHeight = height\n      editorElement.style.height = `${height}px`\n      this.editor.layout()\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <p>You can use ctrl+space to autocomplete fields, and ctrl+shift+f to format the document</p>\n\t      <p>Hover over fields to get a description of their purpose</p>\n        <EditorContainer className=\"monaco-window\" />\n        <ErrorContainer errors={this.state.errors}/>\n      </div>\n    )\n  }\n}\n\nexport default MonacoWindow","import React, { Component } from 'react';\nimport Select from 'react-select';\n\nclass SelectSettings extends Component {\n\n    renderOption(key, all_settings) {\n      let text = all_settings[key][\"example_name\"]\n      return <option key={key} value={key}>{text}</option>\n    }\n\n    render() {\n\n      let all_settings = this.props.all_example_settings\n      let keys = Object.keys(this.props.all_example_settings)\n      let options = keys.map(k => { return {value: k, label: all_settings[k][\"example_name\"] }})\n\n      let k = this.props.selected_option\n      let value = {value: k, label: all_settings[k][\"example_name\"]}\n      return (\n        <div>\n          <Select options={options}  onChange={this.props.onChange} value={value}/>\n        </div>\n      )\n    }\n  }\n\n  export default SelectSettings","export default {\n    \"id_2\": {\n        \"settings_id\": \"id_2\", \n        \"example_name\": \"Example 2: Forename/surname invesrion\", \n        \"settings_dictionary\": {\n            \"comparison_columns\": [\n                {\n                    \"num_levels\": 4, \n                    \"case_expression\": \"CASE \\nWHEN forename_l is null or forename_r is null then -1\\nWHEN jaro_winkler(forename_l, forename_r) < 0.94 then 3\\nWHEN jaro_winkler(forename_l, forename_r) < 0.88 then 2\\nWHEN jaro_winkler(surname_l, forename_r) < 0.94 or jaro_winkler(surname_r, forename_l) < 0.94 then 1\\nELSE 0\\nEND \", \n                    \"custom_columns_used\": [\n                        \"forename\", \n                        \"surname\"\n                    ], \n                    \"custom_name\": \"name_inversion_forname\"\n                }, \n                {\n                    \"num_levels\": 4, \n                    \"case_expression\": \"CASE \\nWHEN surname_l is null or surname_r is null then -1\\nWHEN jaro_winkler(surname_l, surname_r) < 0.94 then 3\\nWHEN jaro_winkler(surname_l, surname_r) < 0.88 then 2\\nWHEN jaro_winkler(forename_l, surname_r) < 0.94 or jaro_winkler(surname_r, forename_l) < 0.94 then 1\\nELSE 0\\nEND \", \n                    \"custom_columns_used\": [\n                        \"forename\", \n                        \"surname\"\n                    ], \n                    \"custom_name\": \"name_inversion_surname\"\n                }, \n                {\n                    \"col_name\": \"other_columns\"\n                }\n            ], \n            \"link_type\": \"dedupe_only\"\n        }\n    }, \n    \"id_3\": {\n        \"settings_id\": \"id_3\", \n        \"example_name\": \"Example 3: Starting parameters\", \n        \"settings_dictionary\": {\n            \"proportion_of_matches\": 0.2, \n            \"blocking_rules\": [\n                \"l.surname = r.surname\"\n            ], \n            \"link_type\": \"dedupe_only\", \n            \"comparison_columns\": [\n                {\n                    \"num_levels\": 3, \n                    \"m_probabilities\": [\n                        0.05, \n                        0.2, \n                        0.75\n                    ], \n                    \"col_name\": \"first_name\", \n                    \"u_probabilities\": [\n                        0.9, \n                        0.08, \n                        0.02\n                    ]\n                }, \n                {\n                    \"m_probabilities\": [\n                        0.02, \n                        0.98\n                    ], \n                    \"col_name\": \"social_security_number\", \n                    \"u_probabilities\": [\n                        0.99, \n                        0.01\n                    ]\n                }\n            ]\n        }\n    }, \n    \"id_1\": {\n        \"settings_id\": \"id_1\", \n        \"example_name\": \"Example 1: Basic dedupe template\", \n        \"settings_dictionary\": {\n            \"comparison_columns\": [\n                {\n                    \"num_levels\": 3, \n                    \"term_frequency_adjustments\": true, \n                    \"col_name\": \"first_name\"\n                }, \n                {\n                    \"num_levels\": 3, \n                    \"term_frequency_adjustments\": true, \n                    \"col_name\": \"surname\"\n                }, \n                {\n                    \"col_name\": \"dob\"\n                }, \n                {\n                    \"col_name\": \"city\"\n                }, \n                {\n                    \"col_name\": \"email\"\n                }\n            ], \n            \"blocking_rules\": [\n                \"l.first_name = r.first_name\", \n                \"l.surname = r.surname\", \n                \"l.dob = r.dob\"\n            ], \n            \"link_type\": \"dedupe_only\", \n            \"additional_columns_to_retain\": [\n                \"group\"\n            ]\n        }\n    }, \n    \"id_4\": {\n        \"settings_id\": \"id_4\", \n        \"example_name\": \"Example 4: Manually computing match probabilities with no iterations\", \n        \"settings_dictionary\": {\n            \"proportion_of_matches\": 0.2, \n            \"blocking_rules\": [\n                \"l.surname = r.surname\"\n            ], \n            \"comparison_columns\": [\n                {\n                    \"num_levels\": 2, \n                    \"m_probabilities\": [\n                        0.05, \n                        0.2, \n                        0.75\n                    ], \n                    \"col_name\": \"first_name\", \n                    \"u_probabilities\": [\n                        0.9, \n                        0.08, \n                        0.02\n                    ]\n                }, \n                {\n                    \"m_probabilities\": [\n                        0.02, \n                        0.98\n                    ], \n                    \"col_name\": \"social_security_number\", \n                    \"u_probabilities\": [\n                        0.99, \n                        0.01\n                    ]\n                }\n            ], \n            \"link_type\": \"dedupe_only\", \n            \"max_iterations\": 0\n        }\n    }, \n    \"id_5\": {\n        \"settings_id\": \"id_5\", \n        \"example_name\": \"Example 5: Controlling convergence and the number of iterations\", \n        \"settings_dictionary\": {\n            \"comparison_columns\": [\n                {\n                    \"col_name\": \"first_name\"\n                }, \n                {\n                    \"col_name\": \"surname\"\n                }\n            ], \n            \"blocking_rules\": [\n                \"l.surname = r.surname\"\n            ], \n            \"em_convergence\": 0.0001, \n            \"link_type\": \"dedupe_only\", \n            \"max_iterations\": 100\n        }\n    }\n}","import React from 'react';\nimport ReactMarkdown from 'react-markdown'\nimport all_example_settings from \"../data/all_example_settings.js\"\n\nclass InfoPanel extends React.Component {\n\n  state = {\n    md: null\n  }\n\n\n  // This is a way of fetching data asyncronously when props change\n  // see https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html#fetching-external-data-when-props-change\n  static getDerivedStateFromProps(props, state) {\n\n    if (props.select_id !== state.prev_select_id) {\n      return {\n        md: null,\n        prev_select_id: props.select_id,\n      };\n    }\n\n    // No state update necessary\n    return null;\n  }\n\n\n\n  async componentDidMount() {\n    this._loadAsyncData(this.props.select_id)\n\n\n  }\n\n\n    async componentDidUpdate() {\n      if (this.state.md === null) {\n        this._loadAsyncData(this.props.select_id)\n      }\n\n    }\n\n    render() {\n      return <div>\n        <h2>{all_example_settings[this.props.select_id][\"example_name\"]}</h2>\n        <ReactMarkdown source={this.state.md}/>\n        </div>;\n    }\n\n    _loadAsyncData(id) {\n      this._asyncRequest = import(`../md/${id}.md`).then(f => {\n        return fetch(f.default)}\n      ).then(r => {\n        return r.text()\n      }\n        ).then(t => {\n          this._asyncRequest = null;\n          this.setState({md:t});\n        })\n\n\n\n    }\n\n\n  }\n\nexport default InfoPanel","import React from 'react';\n\nfunction Header(props) {\n    return <div>\n        <h1>splink settings examples and editor</h1>\n    <p>Use the editor below to create a <code>splink</code> settings dictionary or load one of our examples:</p>\n    </div>;\n  }\n\n  export default Header\n","import React from 'react';\n\nimport Select from 'react-select';\n\nimport ReactMarkdown from 'react-markdown'\n\nclass KeyExplore extends React.Component {\n\n    state = {\n        schema: null,\n        selected_option: null\n    }\n\n\n    componentDidMount() {\n        let url =\n            \"https://raw.githubusercontent.com/moj-analytical-services/splink/master/splink/files/settings_jsonschema.json\"\n\n        let p1 = fetch(url).then(res => res.json())\n\n        p1.then(data => {\n            this.schema = data\n            this.setState({ selected_option:null })\n        }\n\n        )\n    }\n\n    handleChange = selectedOption => {\n\n        let schema = this.state.schema;\n\n        this.setState(\n            {\n                schema: schema,\n                selected_option: selectedOption\n            }\n        );\n\n    };\n\n\n    schemaToOptions() {\n        if (!(this.schema)) {\n            return []\n        }\n        let keys = Object.keys(this.schema.properties)\n        keys = keys.filter(k => k !== \"$schema\")\n        keys = keys.filter(k => k !== \"$id\")\n        let options1 = keys.map(k => {return {label:k, value:k, is_comparison_col: false}})\n\n        keys = Object.keys(this.schema.properties.comparison_columns.items.properties)\n        keys = keys.filter(k => k !== \"$schema\")\n        keys = keys.filter(k => k !== \"$id\")\n        let options2 = keys.map(k => {return {label:k, value:k, is_comparison_col: true}})\n\n        return options1.concat(options2)\n    }\n\n    optionToSchemaSection() {\n        if (!(this.schema)) {\n            return {}\n        }\n\n        let op = this.state.selected_option\n        if (op.is_comparison_col) {\n            return this.schema.properties.comparison_columns.items.properties[op.value]\n        } else {\n            return this.schema.properties[op.value]\n        }\n\n\n    }\n\n    markdownFromSchemaSection(ss) {\n\n        let is_comparison_col = this.state.selected_option.is_comparison_col\n        let settings_key = this.state.selected_option.value\n\n        let parts = []\n        if ('title' in ss) {\n             parts.push(`**Summary**: ${ss['title']}`)\n        }\n        if ('description' in ss) {\n            parts.push(`**Description**: ${ss['description']}`)\n        }\n\n        if ('default' in ss) {\n            parts.push(`**Default value if not provided**: ${ss['default']}`)\n        }\n\n        if ('type' in ss) {\n            parts.push(`**Data type**: ${ss['type']}`)\n        }\n\n\n        if ('enum' in ss) {\n            let enums = ss['enum'].join(\", \")\n            parts.push(`**Takes one of the following values**: ${enums}`)\n        }\n\n        if ('examples' in ss) {\n            let quote = ''\n            if (ss[\"type\"] === \"string\"){\n                quote = '\"'\n            }\n\n            let code_example = []\n            if (is_comparison_col) {\n                code_example.push(`settings = {`)\n                code_example.push(`    \"comparison_columns\": [`)\n                code_example.push(`        {`)\n                code_example.push(`    \"${settings_key}\": ${quote}${ss['examples'][0]}${quote}`)\n                code_example.push(`        }`)\n                code_example.push(`    ]`)\n                code_example.push(`}`)\n                code_example = code_example.join(\"\\n\")\n\n            } else {\n                code_example.push(`settings = {`)\n                code_example.push(`    \"${settings_key}\": ${quote}${ss['examples'][0]}${quote}`)\n                code_example.push(`}`)\n                code_example = code_example.join(\"\\n\")\n\n            }\n\n            parts.push(`**Example**: \\n  \\`\\`\\`\\` \\n ${code_example}  \\n \\`\\`\\`\\` `)\n        }\n\n\n        return parts.join(\"\\n\\n\")\n    }\n\n    render() {\n\n        let options = this.schemaToOptions()\n        let md = \"\"\n        if (this.state.selected_option) {\n            let schemaSection = this.optionToSchemaSection()\n            md = this.markdownFromSchemaSection(schemaSection)\n        }\n\n\n\n\n        return <div><h2>Setting dictionary key explorer</h2>\n            <p>Select a key from the box below for further details about what it does</p>\n            <Select options={options} value={this.state.selected_option} onChange={this.handleChange} />\n            <br/>\n            <ReactMarkdown source={md}/>\n        </div>\n\n\n    }\n\n}\n\nexport default KeyExplore","import React from 'react';\nimport './App.css';\n\nimport MonacoWindow from \"./components/MonacoWindow\"\nimport SelectSettings from \"./components/SelectSettings\"\nimport InfoPanel from \"./components/InfoPanel\"\nimport Header from \"./components/Header\"\nimport KeyExplore from \"./components/KeyExplore\"\n\nimport all_example_settings from \"./data/all_example_settings.js\"\n\nimport Typography from 'typography'\nimport stAnnesTheme from 'typography-theme-st-annes'\nimport injectFonts from 'typography-inject-fonts'\n\nconst theme = stAnnesTheme\nconst typography = new Typography(theme)\ntypography.injectStyles()\ninjectFonts(typography)\n\n\nclass App extends React.Component {\n\n    state = {\n      option_selection: \"id_1\"\n    }\n\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n\n    getTextFromId(id) {\n      let settings_dict = all_example_settings[id][\"settings_dictionary\"]\n      let settings_text = JSON.stringify(settings_dict, null, 4)\n      return settings_text\n    }\n\n    handleChange = (event) => {\n\n        let settings_id = event.value\n        this.setState({option_selection: settings_id})\n    }\n\n    render() {\n\n      let editor_text = this.getTextFromId(this.state.option_selection)\n\n      return <div className=\"App-main-div\">\n          <Header/>\n\n          <SelectSettings onChange={this.handleChange} all_example_settings={all_example_settings} selected_option={this.state.option_selection}/>\n          <div className=\"App-flex-container\">\n            <div className=\"App-flex-item\">\n              <h2>Code editor</h2>\n            <MonacoWindow editor_contents_string={editor_text}  option_selection={this.state.option_selection}/>\n            </div>\n            <div className=\"App-flex-item\">\n            <InfoPanel select_id={this.state.option_selection} />\n            </div>\n          </div>\n          <KeyExplore/>\n      </div>;\n    }\n  }\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}